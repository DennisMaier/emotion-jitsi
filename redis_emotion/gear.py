import cv2
import redisAI
import numpy as np
import tensorflow as tf
from redisgears import executeCommand as execute
import json
# con = Client(host='localhost', port=6379)
# r = redis.Redis()
SIGMOIDSCORETHRESHOLD = 0.8472978603872034
ANCHORS = [{'x_center': 0.03125, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.03125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.09375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.15625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.21875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.28125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.34375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.40625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.46875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.53125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.59375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.65625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.71875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.78125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.84375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.90625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.03125, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.09375, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.15625, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.21875, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.28125, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.34375, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.40625, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.46875, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.53125, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.59375, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.65625, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.71875, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.78125, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.84375, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.90625, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.96875, 'y_center': 0.96875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.0625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.1875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.3125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.4375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.5625, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.6875, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.8125, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.0625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.1875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.3125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.4375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.5625, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.6875, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.8125, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}, {'x_center': 0.9375, 'y_center': 0.9375, 'h': 1.0, 'w': 1.0}]



def process_image(img):
        img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
        img = img / 255.0
        img_resized = tf.image.resize(img, [256,256], 
                                    method='bicubic', preserve_aspect_ratio=False)
        # img_resized = cv2.resize(img, (120,23), interpolation = cv2.INTER_AREA)

#         tf.image.resize_with_pad(
#     image,
#     target_height,
#     target_width,
#     method=ResizeMethod.BILINEAR,
#     antialias=False
# )

        img_input = img_resized.numpy()
        img_input = (img_input - 0.5) / 0.5

        # Adjust matrix dimenstions
        reshape_img = img_input.reshape(1,256,256,3)

        img = np.asarray(reshape_img, dtype=np.float32)

        # set input tensor
        # con.tensorset('input_blaze', img, dtype='float')
        # execute('AI.TENSORSET','input_emotion', 'FLOAT', '1 256 256 3', 'VALUES', img )
        
        return img

def filterDetections(output1):

		# Filter based on the score threshold before applying sigmoid function
		goodDetections = np.where(output1 > SIGMOIDSCORETHRESHOLD)[0]

		# Convert scores back from sigmoid values
		scores = 1.0 /(1.0 + np.exp(-output1[goodDetections]))

		return scores, goodDetections

def extractDetections(output0, goodDetectionsIndices):

		numGoodDetections = goodDetectionsIndices.shape[0]

		keypoints = np.zeros((numGoodDetections, 6, 2))
		boxes = np.zeros((numGoodDetections, 4))

		for idx, detectionIdx in enumerate(goodDetectionsIndices):
			anchor = ANCHORS[detectionIdx]

			sx = output0[detectionIdx, 0]
			sy = output0[detectionIdx, 1]
			w = output0[detectionIdx, 2]
			h = output0[detectionIdx, 3]

			cx = sx + anchor["x_center"] * 256
			cy = sy + anchor["y_center"] * 256

			cx /= 256
			cy /= 256
			w /= 256
			h /= 256

			for j in range(6):
				lx = output0[detectionIdx, 4 + (2 * j) + 0]
				ly = output0[detectionIdx, 4 + (2 * j) + 1]
				lx += anchor["x_center"] * 256
				ly += anchor["y_center"] * 256
				lx /= 256
				ly /= 256
				keypoints[idx,j,:] = np.array([lx, ly])

			boxes[idx,:] = np.array([cx - w * 0.5, cy - h * 0.5, cx + w * 0.5, cy + h * 0.5])

		return boxes, keypoints

def filterWithNonMaxSupression(boxes, keypoints, scores):
    # Filter based on non max suppression
    selected_indices = tf.image.non_max_suppression(boxes, scores, 1, 0.3)
    filtered_boxes = tf.gather(boxes, selected_indices).numpy()


    return filtered_boxes

def blazeRun(img_np):
    img_ba = bytearray(img_np.tobytes())
    image_tensor = redisAI.createTensorFromBlob('FLOAT', [1, 256, 256, 3], img_ba)

    
    modelRunner = redisAI.createModelRunner('blazeface_back')

    redisAI.modelRunnerAddInput(modelRunner, 'input_blaze', image_tensor)
    redisAI.modelRunnerAddOutput(modelRunner, 'output0')
    redisAI.modelRunnerAddOutput(modelRunner, 'output1')

    try:
        res =  redisAI.modelRunnerRun(modelRunner)
        redisAI.setTensorInKey('reg-back', res[0])
        redisAI.setTensorInKey('class-back', res[1])
        return "ModelRun_OK"
    except Exception as e:
        return e


def runBlazeface(x):
    """ Runs the blazeface model on an input image from the stream """

    # Retrieve input values.
    image = x['value']['image']
    room = x['value']['room']
    userId = x['value']['userId']

    img_cv = cv2.imdecode(np.frombuffer(image, np.uint8), cv2.IMREAD_COLOR)
    img_cv_shape = img_cv.shape
    img_cv_width = img_cv_shape[1]
    img_cv_height = img_cv_shape[0]

    # Prepare image for inference and set input tensor
    img_np = process_image(img_cv)
    blazeRun(img_np)
    # img_ba = bytearray(img_np.tobytes())
    # image_tensor = redisAI.createTensorFromBlob('FLOAT', [1, 256, 256, 3], img_ba)

    # # Create the ReedisAI model runner and run it
    # modelRunner = redisAI.createModelRunner('blazeface_back')
    # redisAI.modelRunnerAddInput(modelRunner, 'input_blaze', image_tensor)
    # redisAI.modelRunnerAddOutput(modelRunner, 'reg-back')
    # redisAI.modelRunnerAddOutput(modelRunner, 'class-back')


    # model_replies = redisAI.modelRunnerRun(modelRunner)

    # # execute('SET','dim1', redisAI.tensorGetDims(model_replies[0]))
    # # execute('SET','dim2', redisAI.tensorGetDims(model_replies[1]))

    # # # Convert PyTensor to bytearr. 
    # # buf_output0 = redisAI.tensorGetDataAsBlob(model_replies[0])
    # # buf_output1 = redisAI.tensorGetDataAsBlob(model_replies[1])

    # # onedim0 = np.frombuffer(buf_output0)
    # # onedim1 = np.frombuffer(buf_output1)

    # # onedim0.shape = (1,896,16)
    # # onedim1.shape = (1,896,1)


    # # output0 = np.squeeze(model_replies[0].detach().cpu().numpy())
    # # output1 = np.squeeze(onedim1)
    
    # output0 = model_replies[0].detach().cpu().numpy()
    # output1 = model_replies[1].detach().cpu().numpy()

    # execute('SET','o1', output0.shape)
    # execute('SET','o2', output1.shape)

    # # The model's output is processed with a PyTorch script for non maxima suppression
    # scriptRunner = redisAI.createScriptRunner('blazeface:script', 'boxes_from_tf')
    # redisAI.scriptRunnerAddInput(scriptRunner, model_replies)
    # redisAI.scriptRunnerAddOutput(scriptRunner)
    # script_reply = redisAI.scriptRunnerRun(scriptRunner)


    # Perform inference on the image
    # con.modelexecute('blazeface_back', ['input_blaze'], ['reg-back', 'class-back'])
    # execute('AI.MODELEXECUTE','blazeface_back','INPUTS', '1', ['input_blaze'],'OUTPUTS', '2', ['reg-back', 'class-back'])



    output0 = execute('AI.TENSORGET', 'reg-back', 'VALUES')
    output1 = execute('AI.TENSORGET', 'class-back', 'VALUES')

    output0 = np.asarray(output0,dtype=float)
    output1 = np.asarray(output1,dtype=float)

    output0 = output0.reshape(1,896,16)
    output1 = output1.reshape(1,896,1)

    output0 = np.squeeze(output0)
    output1 = np.squeeze(output1)

    # output0 = np.squeeze(np.asarray(execute('AI.TENSORGET', 'reg-back', 'VALUES')).reshape(1,896,16)) # con.tensorget('reg-back')
    # output1 = np.squeeze(np.asarray(execute('AI.TENSORGET', 'class-back', 'VALUES')).reshape(1,896,1)) # con.tensorget('class-back')




    # Filter scores based on the detection scores
    scores, goodDetectionsIndices = filterDetections(output1)

    # Extract information of filtered detections
    boxes, keypoints = extractDetections(output0, goodDetectionsIndices)

    # Filter results with non-maximum suppression
    boxes = filterWithNonMaxSupression(boxes, keypoints, scores)

    # Stop if no box was found
    if(len(boxes) == 0):
        # Return the original image instead of the cropped one.
        return userId, room, img_cv

    # Box found
    detectionBox = boxes[0]

    # Crop image
    x1 = int((img_cv_width * detectionBox[0])) 
    x2 = int((img_cv_width * detectionBox[2]))
    y1 = int((img_cv_height * detectionBox[1]))
    y2 = int((img_cv_height * detectionBox[3]))   
    img_cropped = img_cv[y1:y2,x1:x2]
    
    return userId, room, img_cropped 



def process_cropped_image(img):
    
    # Grayscale image is required
    img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

    # Width and height have to be 224
    img = cv2.resize(img, (224,224), interpolation = cv2.INTER_AREA)
    
    # Model input will be float
    img = np.asarray(img, dtype=np.float32)

    # Normalize
    img=img/255

    # Input dimensions = (1,224,224,1)
    img = np.expand_dims(img, axis=-1)
    img = np.expand_dims(img, axis=0)

    # Set input tensor
    # con.tensorset('input_emotion', img, dtype='float')
    # execute('AI.TENSORSET','input_emotion', 'FLOAT', '1 224 224 1', 'BLOB', img.tobytes )
    return img


async def runEmo(img_np):
    img_ba = bytearray(img_np.tobytes())
    image_tensor = redisAI.createTensorFromBlob('FLOAT', [1, 224, 224, 1], img_ba)

    modelRunner = redisAI.createModelRunner('emotion')

    redisAI.modelRunnerAddInput(modelRunner, 'input_emotion', image_tensor)
    redisAI.modelRunnerAddOutput(modelRunner, 'output')


    res =  await redisAI.modelRunnerRunAsync(modelRunner)
    redisAI.setTensorInKey('emotion_result', res[0])

async def runEmotion(x):
    """ Runs the emotion recognition model on the cropped input image (or on the original, in case blazeface failed) """

    userId, room, img_processed = x[0], x[1], x[2]

    # Prepare the image for the emotion inference model
    img_np = process_cropped_image(img_processed)
    await runEmo(img_np)

    # Run the emotion model
    # con.modelexecute('emotion', ['input_emotion'], ['emotion_result'])
    # execute('AI.MODELEXECUTE','emotion','INPUTS', '1', ['input_emotion'],'OUTPUTS', '1', ['emotion_result'])

    
    output = execute('AI.TENSORGET', 'emotion_result', 'VALUES')

    output = np.asarray(output,dtype=float)

    
    
    




    return userId, room, output

# helper function to map the index of the max value in the output of emotion model to an emotion
def index_to_emotion(index):
    emotions =  {0:
                'anger',
                1:
                'contempt',
                2:
                'disgust',
                3:
                'fear',
                4:
                'happy',
                5:
                'neutral',
                6:
                'sad',
                7:
             'surprise'    }
    return emotions[index]
    

def storeResults(x):
    userId, room, emotion_result = x[0], x[1], x[2]

    # figure out the emotion with the maximum value in the output of the emotion model
    dominant = index_to_emotion(emotion_result.argmax().item())

    # combine the raw output of the model and the dominant emotion 
    result ={'userId': userId,
            'emotions':{
                    'raw':{
                    'anger': emotion_result[0].item(),
                    'contempt': emotion_result[1].item(),
                    'disgust': emotion_result[2].item(),
                    'fear': emotion_result[3].item(),
                    'happy': emotion_result[4].item(),
                    'neutral': emotion_result[5].item(),
                    'sad': emotion_result[6].item(),
                    'surprise': emotion_result[7].item()
                    },
                    'dominant': dominant,

        }}

    # Store the output in a stream
    res_id = execute('XADD', 'output:room:all', 'MAXLEN', '~', 1000, '*', 'userId', userId, 'emotion', json.dumps(result))

    return result






gb = GearsBuilder('StreamReader')
gb.map(runBlazeface)  
gb.map(runEmotion)
gb.map(storeResults)
gb.register(prefix='input:room:all', batch=1, duration=0, onFailedPolicy='continue', trimStream=False)
# gb.run(fromId='0-0')


# gb = GearsBuilder()
# gb.map(runBlazeface)  
# gb.map(runEmotion)
# gb.map(storeResults)
# gb.run('fear6')

